(()=>{var e={};e.id=158,e.ids=[158],e.modules={2763:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(60687),i=t(43210),o=t(17193),n=t(56304),a=t(65553),l=t(70146),d=t(16189),u=t(75535),c=t(88497),p=t(37590);function m(){let[e]=(0,o.hD)(n.j2),[r,t]=(0,i.useState)(null),[m,x]=(0,i.useState)(!1),[h,f]=(0,i.useState)(""),[b,g]=(0,i.useState)(""),[v,y]=(0,i.useState)(""),w=(0,d.useRouter)(),j=async e=>{if(e===v)return!0;let r=(0,u.rJ)(n.db,"users"),t=(0,u.P)(r,(0,u._M)("username","==",e));return(await (0,u.GG)(t)).empty},P=async t=>{if(t.preventDefault(),e){if(!/^[a-zA-Z0-9_]{3,20}$/.test(h))return void p.Ay.error("Username must be 3-20 characters long and can only contain letters, numbers, and underscores");if(!await j(h))return void p.Ay.error("Username is already taken");x(!0);try{let t=e.photoURL;if(r){let s=(0,l.KR)(n.IG,`profile-photos/${e.uid}`),i=await (0,l.D)(s,r);t=await (0,l.qk)(i.ref)}await (0,a.r7)(e,{photoURL:t});let s=(0,u.H9)(n.db,"users",e.uid);await (0,u.BN)(s,{uid:e.uid,username:h,bio:b,photoURL:t,updatedAt:new Date},{merge:!0}),p.Ay.success("Profile updated successfully!"),w.push("/profile"),w.refresh()}catch(e){console.error("Error updating profile:",e),p.Ay.error("Failed to update profile")}finally{x(!1)}}};return e?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)(c.A,{}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 py-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Edit Profile"}),(0,s.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,s.jsx)("input",{type:"text",id:"username",name:"username",required:!0,pattern:"[a-zA-Z0-9_]{3,20}",title:"Username must be 3-20 characters long and can only contain letters, numbers, and underscores",value:h,onChange:e=>f(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,s.jsx)("textarea",{id:"bio",name:"bio",rows:4,value:b,onChange:e=>g(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"photo",className:"block text-sm font-medium text-gray-700",children:"Profile Photo"}),(0,s.jsx)("input",{type:"file",id:"photo",name:"photo",accept:"image/*",onChange:e=>t(e.target.files?.[0]||null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-600 hover:file:bg-indigo-100"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-blue-300 w-full sm:w-auto",children:m?"Saving...":"Save Changes"})})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)(c.A,{}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 py-6",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,s.jsx)("p",{className:"text-center text-gray-600",children:"Please sign in to edit your profile"})})})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13681:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var s=t(65239),i=t(48088),o=t(88170),n=t.n(o),a=t(30893),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);t.d(r,l);let d={children:["",{children:["(main)",{children:["profile",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,43765)),"/Users/agnibharay/Developer/connecto/app/(main)/profile/edit/page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/agnibharay/Developer/connecto/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/Users/agnibharay/Developer/connecto/app/(main)/profile/edit/page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(main)/profile/edit/page",pathname:"/profile/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},42668:(e,r,t)=>{Promise.resolve().then(t.bind(t,43765))},43765:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/agnibharay/Developer/connecto/app/(main)/profile/edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/agnibharay/Developer/connecto/app/(main)/profile/edit/page.tsx","default")},48748:(e,r,t)=>{Promise.resolve().then(t.bind(t,2763))},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,61,658,474,49,564],()=>t(13681));module.exports=s})();