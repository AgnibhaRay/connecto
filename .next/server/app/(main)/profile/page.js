(()=>{var e={};e.id=897,e.ids=[897],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10797:(e,r,s)=>{Promise.resolve().then(s.bind(s,23750))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},23750:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/agnibharay/Developer/connecto/app/(main)/profile/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/agnibharay/Developer/connecto/app/(main)/profile/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},38983:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=s(65239),i=s(48088),a=s(88170),n=s.n(a),o=s(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let d={children:["",{children:["(main)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23750)),"/Users/agnibharay/Developer/connecto/app/(main)/profile/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/Users/agnibharay/Developer/connecto/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/agnibharay/Developer/connecto/app/(main)/profile/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(main)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},80197:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>j});var t=s(60687),i=s(43210),a=s(17193),n=s(56304),o=s(75535),l=s(88497),d=s(32965),c=s(37590);function u({targetUserId:e,initialIsFollowing:r,onFollowUpdate:s}){let[a,l]=(0,i.useState)(r),[d,u]=(0,i.useState)(!1),p=async()=>{if(!n.j2.currentUser)return void c.Ay.error("Please sign in to follow users");if(n.j2.currentUser.uid===e)return void c.Ay.error("You cannot follow yourself");u(!0);try{let r=(0,o.wP)(n.db),t=(0,o.H9)(n.db,"users",n.j2.currentUser.uid),i=(0,o.H9)(n.db,"users",e);a?(r.update(t,{following:(0,o.C3)(e)}),r.update(i,{followers:(0,o.C3)(n.j2.currentUser.uid)}),await r.commit(),s?.(!1),c.Ay.success("Unfollowed successfully")):(r.update(t,{following:(0,o.hq)(e)}),r.update(i,{followers:(0,o.hq)(n.j2.currentUser.uid)}),await r.commit(),s?.(!0),c.Ay.success("Following successfully"))}catch(e){console.error("Error updating follow status:",e),c.Ay.error("Failed to update follow status")}finally{u(!1)}};return(0,t.jsx)("button",{onClick:p,disabled:d,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors 
        ${a?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-blue-600 text-white hover:bg-blue-700"} ${d?"opacity-50 cursor-not-allowed":""}`,children:d?"Processing...":a?"Unfollow":"Follow"})}var p=s(16189);function x({targetUserId:e,className:r=""}){let[s,a]=(0,i.useState)(!1),l=(0,p.useRouter)(),d=async()=>{if(!n.j2.currentUser)return void c.Ay.error("Please sign in to start a chat");if(n.j2.currentUser.uid===e)return void c.Ay.error("You cannot chat with yourself");a(!0);try{let r=(0,o.rJ)(n.db,"chats"),s=(0,o.P)(r,(0,o._M)("participants","array-contains",n.j2.currentUser.uid)),t=await (0,o.GG)(s),i=null;if(t.forEach(r=>{r.data().participants.includes(e)&&(i=r.id)}),i)l.push(`/chat/${i}`);else{let s=await (0,o.gS)(r,{participants:[n.j2.currentUser.uid,e],createdAt:(0,o.O5)(),updatedAt:(0,o.O5)()});l.push(`/chat/${s.id}`)}}catch(e){console.error("Error starting chat:",e),c.Ay.error("Failed to start chat")}finally{a(!1)}};return(0,t.jsx)("button",{onClick:d,disabled:s,className:`px-4 py-2 text-sm font-medium rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors ${s?"opacity-50 cursor-not-allowed":""} ${r}`,children:s?"Starting chat...":"Message"})}var m=s(85814),h=s.n(m),g=s(16131),f=s(35451);function y({targetUser:e}){let{user:r}=(0,f.A)(),[s,a]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),[u,p]=(0,i.useState)(e.isVerified),x=async()=>{if(!r)return void c.Ay.error("Please sign in to perform this action");if(!l)return void c.Ay.error("Only administrators can verify users");a(!0);try{let r=(0,o.H9)(n.db,"users",e.uid);await (0,o.mZ)(r,{isVerified:!u,updatedAt:new Date}),c.Ay.success(u?"User verification removed":"User verified successfully")}catch(e){console.error("Error toggling verification:",e),c.Ay.error("Failed to update verification status")}finally{a(!1)}};return r&&l?(0,t.jsx)("button",{onClick:x,disabled:s,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Updating...":u?"Remove Verification":"Verify User"}):null}var b=s(30474);function v(){let[e]=(0,a.hD)(n.j2),[r,s]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0),[m,f]=(0,i.useState)(null),[v,j]=(0,i.useState)(!1),[w,N]=(0,i.useState)(0),[P,A]=(0,i.useState)(0),U=(0,p.useSearchParams)().get("username");if(!e)return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 py-6",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:(0,t.jsx)("p",{className:"text-center text-gray-600",children:"Please sign in to view profiles"})})})]});if(!m)return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 py-6",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:(0,t.jsx)("p",{className:"text-center text-gray-600",children:"User not found"})})})]});let q=!U||m.uid===e.uid;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)(l.A,{}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 py-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8 mb-6 sm:mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-8",children:[(0,t.jsx)(b.default,{src:m.photoURL||"/images/default-avatar.png",alt:m.displayName||"Profile",width:96,height:96,className:"h-24 w-24 rounded-full border-4 border-gray-100 mx-auto sm:mx-0"}),(0,t.jsxs)("div",{className:"text-center sm:text-left",children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-2",children:[m.displayName,m.isVerified&&(0,t.jsx)(g.A,{})]}),(0,t.jsxs)("p",{className:"text-base sm:text-lg text-gray-600 mt-1 flex items-center gap-2",children:["@",m.username,m.isAdmin&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Admin"})]}),!q&&(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)(u,{targetUserId:m.uid,initialIsFollowing:v,onFollowUpdate:j}),(0,t.jsx)(x,{targetUserId:m.uid})]})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:q?(0,t.jsx)(h(),{href:"/profile/edit",className:"inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit Profile"}):e?.uid&&(0,t.jsx)(y,{targetUser:m})})]}),(0,t.jsxs)("div",{className:"flex space-x-6 text-center border-t border-gray-200 pt-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block text-2xl font-bold text-gray-900",children:w}),(0,t.jsx)("span",{className:"block text-sm text-gray-500",children:"Followers"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block text-2xl font-bold text-gray-900",children:P}),(0,t.jsx)("span",{className:"block text-sm text-gray-500",children:"Following"})]})]}),m.bio&&(0,t.jsx)("div",{className:"mt-6 border-t border-gray-200 pt-6",children:(0,t.jsx)("p",{className:"text-gray-600",children:m.bio})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:q?"Your Posts":`${m.displayName}'s Posts`}),o?(0,t.jsx)("div",{className:"text-center py-6 sm:py-8",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Loading posts..."})}):0===r.length?(0,t.jsx)("div",{className:"text-center py-6 sm:py-8",children:(0,t.jsx)("p",{className:"text-gray-600",children:q?"You haven't created any posts yet.":"This user hasn't created any posts yet."})}):(0,t.jsx)("div",{className:"space-y-4 sm:space-y-6",children:r.map(e=>(0,t.jsx)(d.A,{post:e},e.id))})]})]})]})}function j(){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-8",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[(0,t.jsx)("div",{className:"h-24 w-24 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"ml-4 space-y-2",children:[(0,t.jsx)("div",{className:"h-6 w-40 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-4 w-24 bg-gray-200 rounded"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})})]}),children:(0,t.jsx)(v,{})})}},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92237:(e,r,s)=>{Promise.resolve().then(s.bind(s,80197))},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,61,658,474,49,902,268,564,965],()=>s(38983));module.exports=t})();